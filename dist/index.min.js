/*!
 * articleup.js v1.1.0
 * (c) 2020- YogurtCat
 * git: https://github.com/YogurtCat2020/articleup
 * Released under the MIT License.
 */
self.articleup=(()=>{"use strict";var e={983:(e,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0});const t=s(174),n=s(882),l=s(29),i=s(714),a=s(622),o=s(194),d=s(991),u=s(211),h=s(306);r.default=class{constructor(){const e=l.default(),r=i.default(e),s=a.default(e),n=o.default(e),u=d.default(e);this.syms=new t.Dict(e),this.vars=new t.Dict,this.parsers=new t.Dict(r),this.sifters=new t.Dict(s),this.creators=new t.Dict(n),this.paramode=u}parse(e){const r=this.syms.get("main"),s=this.parsers.get(r);if(t.is.un(s))return[];e=u.default(this.vars,e);return s(this,h.default(e))}parseVars(e){const r=this.syms.get("var"),s=this.vars;if(e.elems.length>=2&&e.elems[1].elem===r){const r=[];for(let n of e.elems[1].attrs){let e=t.to.obj(s.get(n));if(t.is.un(e))r.push(n);else{let s={elems:[],children:e,level:-1,status:{}};if(s=this.parseChildrenDelElems(s),s=this.parseChildrenJoin(s),s.children.length<=0)continue;let n=s.children[0];t.arr.appends(r,t.str.split(t.str.trim(n)))}}e.elems[0].attrs=r,e.elems.splice(1,1)}return e}parseElems(e){if(e.elems.length<=1)return e;const r={elems:e.elems.splice(1),children:e.children,level:-1,status:{}};return e.children=[r],e}parseChildrenVars(e){const r=this.syms.get("var"),s=this.vars,n=[];for(let l of e.children)if(t.is.str(l)||l.elems[0].elem!==r)n.push(l);else for(let e of l.elems[0].attrs){let r=t.to.obj(s.get(e));t.is.un(r)?n.push(e):t.arr.appends(n,r)}return e.children=n,e}parseChildrenContinue(e){const r=this.syms.get("continue"),s=[];let n=!1;for(let l of e.children)t.is.obj(l)&&l.elems[0].elem===r?n=!0:n?(t.is.str(l)&&(l=t.str.trimLeft(l)),s.push(l),n=!1):s.push(l);return e.children=s,e}parseChildrenJoin(e,r){t.is.un(r)&&(r="");const s=[];for(let n of e.children)t.is.str(n)&&t.is.str(t.arr.last(s))?t.arr.last(s,t.arr.last(s)+r+n):s.push(n);return e.children=s,e}parseChildrenSplit(e){let r=[];for(let s of e.children)t.is.str(s)?t.arr.appends(r,t.str.splitLines(s).map(t.str.tightSpaces)):r.push(s);e.children=r,r=[];for(let s of e.children)t.is.str(s)?r.length<=0?r.push(t.str.trimLeft(s)):t.is.str(t.arr.last(r))?(t.arr.last(r,t.str.trimRight(t.arr.last(r))),r.push(t.str.trimLeft(s))):r.push(s):r.push(s);return t.is.str(t.arr.last(r))&&t.arr.last(r,t.str.trimRight(t.arr.last(r))),e.children=r,e}parseChildrenDelEmpty(e){const r=[];for(let s of e.children)if(t.is.str(s))if(""===s){if(r.length<=0||""===t.arr.last(r)&&t.is.str(r[r.length-2]))continue;r.push(s)}else""===t.arr.last(r)&&t.is.str(r[r.length-2])?t.arr.last(r,s):r.push(s);else r.push(s);for(;""===t.arr.last(r);)r.pop();return e.children=r,e}parseChildrenLines(e){const r=this.syms.get("paragraph"),s=e=>this.parseChildrenDelEmpty({elems:[{elem:r,attrs:[]}],children:e,level:-1,status:{}});let n=[],l=[],i=!1;for(let r of e.children)t.is.str(r)?i?(n.push(s(l)),l=[r]):(l.push(r),i=!0):(l.push(r),i=!1);return l.length>0&&n.push(s(l)),e.children=n,e}parseChildrenNewLines(e){const r={elems:[{elem:this.syms.get("newline"),attrs:["1"]}],children:[],level:-1,status:{}};let s=[],t=!0;for(let n of e.children)t?t=!1:s.push(r),s.push(n);return e.children=s,e}parseChildrenJoinLines(e){return this.parseChildrenJoin(e,"\n")}parseChildrenDelStrs(e){const r=[];for(let s of e.children)t.is.obj(s)&&r.push(s);return e.children=r,e}parseChildrenDelElems(e){const r=[];for(let s of e.children)t.is.str(s)&&r.push(s);return e.children=r,e}parseChildrenClosure(e){const r=this.syms.get("closure"),s=[];for(let n of e.children)t.is.obj(n)&&n.elems[0].elem===r?(n=this.parseVars(n),n=this.parseElems(n),n=this.parseChildrenVars(n),n=this.parseChildrenContinue(n),n=this.parseChildrenJoin(n),n=this.parseChildrenSplit(n),n=this.parseChildrenDelEmpty(n),n=this.parseChildrenJoinLines(n),t.arr.appends(s,n.children)):s.push(n);return e.children=s,e}parseChildrenCopyStatus(e){for(let r of e.children)t.is.obj(r)&&n.copyStatus(r,e);return e}parseChildrenParsers(e){const r=[];for(let s of e.children)t.is.str(s)?r.push(s):t.arr.appends(r,this.parseParsers(s));return r}parseParsers(e){if(e.elems.length<1)return[];const r=this.parsers.get(e.elems[0].elem);return t.is.un(r)?[]:r(this,e)}parseSifters(e){if(e.elems.length<1)return[];const r=this.sifters.get(e.elems[0].elem);if(t.is.un(r))return[];for(let s of r){let r=s.parser(this,e);if(!t.is.un(r))return r}return[]}createElement(e,r,s,n){const l=this.creators.get(e);return t.is.un(l)?[]:l(r,s,n)}parseCreate(e){if(e.elems.length<1)return[];e=this.parseVars(e),e=this.parseElems(e),e=this.parseChildrenVars(e),e=this.parseChildrenContinue(e),e=this.parseChildrenJoin(e),e=this.parseChildrenSplit(e),e=this.parseChildrenDelEmpty(e),e=this.parseChildrenLines(e),e=this.parseChildrenNewLines(e),e=this.parseChildrenCopyStatus(e);const r=this.parseChildrenParsers(e),s=e.elems[0].elem,t=e.elems[0].attrs,n=e.status;return this.createElement(s,n,t,r)}}},607:(e,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.util=r.Context=void 0;const t=s(983);r.Context=t.default;const n=s(882);r.util=n},194:(e,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0});const t=s(174),n=s(882),l=s(29),i=(e,r,s)=>[n.newCode("'article'",s)],a=(e,r,s)=>[n.newCode("'section'",s)],o=(e,r,s)=>[n.newCode("'figure'",s)],d=(e,r,s)=>[n.newCode("'p'",s)],u=(e,r,s)=>[n.newCode(`'h${e.chapter}'`,s)],h=(e,r,s)=>[n.newCode("'caption'",s)],p=(e,r,s)=>{let l;l=1===e.paragraph&&!0===e.line_block?"'p'":"'span'";let[i]=r;return t.is.un(i)&&(i="0"),[t.decor.$(n.newCode(l,s),n.addClass("a"),n.addClass("a"+i))]},c=(e,r,s)=>{let[l]=r;return t.is.un(l)&&(l="0"),[t.decor.$(n.newCode("'span'",s),n.addClass("c"),n.addClass("c"+l))]},f=(e,r,s)=>{let[l]=r;return t.is.un(l)&&(l="0"),[t.decor.$(n.newCode("'mark'",s),n.addClass("h"+l))]},m=(e,r,s)=>[n.newCode("'strong'",s)],C=(e,r,s)=>[n.newCode("'em'",s)],g=(e,r,s)=>[n.newCode("'ins'",s)],b=(e,r,s)=>[n.newCode("'del'",s)],y=(e,r,s)=>[n.newCode("'sup'",s)],w=(e,r,s)=>[n.newCode("'sub'",s)],j=(e,r,s)=>{let[l,i]=r;return t.is.un(l)?[]:(t.is.un(i)&&(i="_blank"),l=t.to.str(l),i=t.to.str(i),s.length<=0&&(s=[l]),[t.decor.$(n.newCode("'a'",s),n.addAttrs("href",l),n.addAttrs("target",i))])},v=(e,r,s)=>{let[n]=r;n=Number(n),(t.is.nan(n)||n<0)&&(n=0);const l=Math.floor(n/10),i=n%10,a=new Array(l).fill(t.to.str(" ".repeat(10)));return i>0&&a.push(t.to.str(" ".repeat(i))),a},E=(e,r,s)=>{let[l]=r;return l=Number(l),(t.is.nan(l)||l<0)&&(l=0),new Array(l).fill(n.newCode("'br'"))},S=(e,r,s)=>{let[l]=r;return l=Number(l),(t.is.nan(l)||l<0)&&(l=0),new Array(l).fill(n.newCode("'hr'"))},k=(e,r,s)=>{let[l,i,a]=r,[o]=s;return t.is.un(l)?[]:(t.is.un(i)&&(i="0"),t.is.un(a)&&(a="0"),l=t.to.str(l),o=t.is.un(o)?null:n.addAttrs("alt",t.to.str(o)),i="0"===i?null:n.addAttrs("width",t.to.str(i)),a="0"===a?null:n.addAttrs("height",t.to.str(a)),[t.decor.$(n.newCode("'img'"),n.addAttrs("src",l),o,i,a)])},_=(e,r,s)=>{let[l,i,a]=r,[o]=s;if(t.is.un(o))return[];t.is.un(a)&&(a="svg"),t.is.un(l)&&(l="0"),t.is.un(i)&&(i="0");const d=t.to.str("https://latex.codecogs.com/"+a+".latex?"+encodeURIComponent(o));return l="0"===l?null:n.addAttrs("width",t.to.str(l)),i="0"===i?null:n.addAttrs("height",t.to.str(i)),[t.decor.$(n.newCode("'img'"),n.addClass("f"),n.addAttrs("src",d),l,i)]},A=(e,r,s)=>[n.newCode("'blockquote'",s)],P=(e,r,s)=>{if(1===e.paragraph&&!0===e.line_block){let[e]=r,[l]=s;return e=t.is.un(r)?null:n.addClass(e),l=t.to.str(l),[n.newCode("'pre'",[t.decor.$(n.newCode("'code'",[l]),e)])]}let[l]=r,[i]=s;return t.is.un(l)&&(l="c"),l={c:"code",s:"samp",v:"var"}[l]||"code",l=t.to.str(l),i=t.to.str(i),[n.newCode(l,[i])]},D=(e,r,s)=>[n.newCode("'kbd'",s)],$=(e,r,s)=>[],L=(e,r,s)=>[],V=(e,r,s)=>[],J=(e,r,s)=>[];r.default=e=>(t.is.un(e)&&(e=l.default()),{[e.article]:i,[e.section]:a,[e.figure]:o,[e.paragraph]:d,[e.headline]:u,[e.caption]:h,[e.align]:p,[e.color]:c,[e.highlight]:f,[e.bold]:m,[e.italic]:C,[e.underline]:g,[e.strike]:b,[e.superscript]:y,[e.subscript]:w,[e.hyperlink]:j,[e.space]:v,[e.newline]:E,[e.separate]:S,[e.image]:k,[e.formula]:_,[e.quote]:A,[e.code]:P,[e.keyboard]:D,[e.list]:$,[e.table]:L,[e.audio]:V,[e.video]:J})},991:(e,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0});const t=s(174),n=s(29);r.default=e=>(t.is.un(e)&&(e=n.default()),{line:new Set([e.align,e.color,e.highlight,e.bold,e.italic,e.underline,e.strike,e.superscript,e.subscript,e.hyperlink,e.space,e.newline,e.image,e.formula,e.code,e.keyboard]),block:new Set([e.closure,e.headline,e.caption,e.align,e.newline,e.separate,e.quote,e.code,e.list,e.table,e.audio,e.video])})},714:(e,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0});const t=s(174),n=s(29),l=(e,r)=>(r=e.parseChildrenVars(r),r=e.parseChildrenContinue(r),r=e.parseChildrenDelStrs(r),e.parseChildrenParsers(r)),i=(e,r)=>{r=e.parseVars(r),r=e.parseElems(r),r=e.parseChildrenContinue(r),r=e.parseChildrenJoin(r),r=e.parseChildrenSplit(r),r=e.parseChildrenDelEmpty(r),r=e.parseChildrenLines(r);const s=e.vars;for(let n of r.children){let r,l=n.children[0];t.is.obj(l)||([r,l]=t.str.splitLeft(l),t.is.un(l)?1===n.children.length&&s.set(r,[]):(n.children[0]=l,n=e.parseChildrenClosure(n),n=e.parseChildrenVars(n),n=e.parseChildrenContinue(n),n=e.parseChildrenJoin(n),n=e.parseChildrenSplit(n),n=e.parseChildrenDelEmpty(n),n=e.parseChildrenJoinLines(n),s.set(r,n.children)))}return[]},a=(e,r)=>(r=e.parseVars(r),r=e.parseElems(r),r=e.parseChildrenVars(r),r=e.parseChildrenContinue(r),r=e.parseChildrenJoin(r),r=e.parseChildrenSplit(r),r=e.parseChildrenDelEmpty(r),r=e.parseChildrenLines(r),e.parseSifters(r)),o=(e,r)=>e.parseSifters(r),d=(e,r)=>e.parseCreate(r),u=(e,r)=>{r=e.parseVars(r),r=e.parseElems(r),r=e.parseChildrenVars(r),r=e.parseChildrenContinue(r),r=e.parseChildrenDelElems(r),r=e.parseChildrenJoin(r),r=e.parseChildrenSplit(r),r=e.parseChildrenDelEmpty(r);const s=(r=e.parseChildrenJoinLines(r)).children,t=r.elems[0].elem,n=r.elems[0].attrs,l=r.status;return e.createElement(t,l,n,s)},h=u,p=(e,r)=>{r=e.parseVars(r),r=e.parseElems(r),r=e.parseChildrenVars(r),r=e.parseChildrenContinue(r),r=e.parseChildrenDelElems(r);const s=(r=e.parseChildrenJoin(r)).children,t=r.elems[0].elem,n=r.elems[0].attrs,l=r.status;return e.createElement(t,l,n,s)};r.default=e=>(t.is.un(e)&&(e=n.default()),{[e.main]:l,[e.def]:i,[e.closure]:a,[e.paragraph]:o,[e.headline]:d,[e.caption]:d,[e.align]:d,[e.color]:d,[e.highlight]:d,[e.bold]:d,[e.italic]:d,[e.underline]:d,[e.strike]:d,[e.superscript]:d,[e.subscript]:d,[e.hyperlink]:d,[e.space]:d,[e.newline]:d,[e.separate]:d,[e.image]:u,[e.formula]:h,[e.quote]:d,[e.code]:p,[e.keyboard]:d})},622:(e,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0});const t=s(174),n=s(29);function l(e,r){return e.children.length>=1&&i(e.children[0],r)}function i(e,r){if(1===e.children.length){const s=e.children[0];return!!t.is.obj(s)&&(t.is.un(r)||s.elems.length>=1&&s.elems[0].elem===r)}return!1}const a=(e,r)=>{if(!t.is.un(r.status.chapter))return null;let s=e.syms.get("headline");if(!l(r,s))return null;r.status.chapter=1,r.status.figure=null,r.status.paragraph=null,r=e.parseChildrenCopyStatus(r);const n=e.parseChildrenParsers(r);s=e.syms.get("article");const i=r.status,a=r.elems[0].attrs;return e.createElement(s,i,a,n)},o=(e,r)=>{if(t.is.un(r.status.chapter))return null;let s=e.syms.get("headline");if(!l(r,s))return null;r.status.chapter+=1,r.status.paragraph=null,r=e.parseChildrenCopyStatus(r);const n=e.parseChildrenParsers(r);s=e.syms.get("section");const i=r.status,a=r.elems[0].attrs;return e.createElement(s,i,a,n)},d=(e,r)=>{if(!t.is.un(r.status.figure))return null;let s=e.syms.get("caption");if(!l(r,s)||!function(e,r){return e.children.length>=1&&i(t.arr.last(e.children),r)}(r,s))return null;r.status.figure=!0,r.status.paragraph=null,r=e.parseChildrenCopyStatus(r);const n=e.parseChildrenParsers(r);s=e.syms.get("figure");const a=r.status,o=r.elems[0].attrs;return e.createElement(s,a,o,n)},u=(e,r)=>{if(!function(e){if(1===e.children.length){const r=e.children[0];return t.is.str(r)}return!1}(r))return null;const s=[t.to.str(r.children[0])];if(!t.is.un(r.status.paragraph))return s;r.status.paragraph=1;const n=e.syms.get("paragraph"),l=r.status,i=r.elems[0].attrs;return e.createElement(n,l,i,s)},h=(e,r)=>{if(!i(r))return null;const s=r.children[0].elems[0].elem;if(!e.paramode.line.has(s))return null;let n=!0;t.is.un(r.status.paragraph)&&(r.status.paragraph=1,n=!1),r.status.line_block=!1,r=e.parseChildrenCopyStatus(r);const l=e.parseChildrenParsers(r);if(n)return l;const a=e.syms.get("paragraph"),o=r.status,d=r.elems[0].attrs;return e.createElement(a,o,d,l)},p=(e,r)=>{if(!i(r))return null;const s=r.children[0].elems[0].elem;return e.paramode.block.has(s)&&t.is.un(r.status.paragraph)?(r.status.line_block=!0,r.status.paragraph=1,r=e.parseChildrenCopyStatus(r),e.parseChildrenParsers(r)):null},c=(e,r)=>{if(r.children.length<=1)return null;let s=!0;t.is.un(r.status.paragraph)&&(r.status.paragraph=r.children.length,s=!1),r=e.parseChildrenCopyStatus(r);const n=e.paramode.line,l=[];for(let s of r.children)t.is.str(s)?l.push(t.to.str(s)):n.has(s.elems[0].elem)&&t.arr.appends(l,e.parseParsers(s));if(s)return l;const i=e.syms.get("paragraph"),a=r.status,o=r.elems[0].attrs;return e.createElement(i,a,o,l)};r.default=e=>(t.is.un(e)&&(e=n.default()),{[e.closure]:[{parser:d,desc:"figure"},{parser:o,desc:"section"},{parser:a,desc:"article"}],[e.paragraph]:[{parser:c,desc:"many"},{parser:p,desc:"one elem block"},{parser:h,desc:"one elem line"},{parser:u,desc:"one str"}]})},29:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.default=()=>({main:"",def:"#",var:":",continue:"/",closure:".",article:". article",section:". section",figure:". figure",paragraph:"p",headline:"H",caption:"G",align:"a",color:"c",highlight:"h",bold:"b",italic:"i",underline:"u",strike:"s",superscript:"^",subscript:"_",hyperlink:"@",space:"+",newline:"*",separate:"-",image:"I",formula:"F",quote:"Q",code:"C",keyboard:"K",list:"L",table:"T",audio:"A",video:"V"})},306:(e,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0});const t=s(174),n=s(882),l=Symbol("CHILDREN"),i=Symbol("ELEMS"),a=Symbol("ATTRS");r.default=function(e){let r,s,o,d=n.newElement(),u=[],h=0,p=0,c=l;for(o=0;o<e.length;o++){let f=e[o];switch(c){case l:if("$"===f&&o+1<e.length)if(t.to.has(" \n",e[o+1]))o++;else if(p<o&&d.children.push(e.slice(p,o)),t.to.has("$(){}",e[o+1]))p=++o;else{let e=n.newElement();d.children.push(e),u.push(d),d=e,c=i}else"{"===f?h++:"}"===f&&(h--,d.level===h&&(p<o&&d.children.push(e.slice(p,o)),d=u.pop(),p=o+1));break;case i:" "===f&&"{"===e[o+1]&&(f=e[++o]),t.to.has("$)} \n",f)?(d=u.pop(),p=o--,c=l):"{"===f?(d.level=h++,p=o+1,c=l):"("===f?(r=1,s=[],p=o+1,c=a):d.elems.push({elem:f,attrs:[]});break;case a:"$"===f?t.to.has(" \n",e[o+1])?o++:(p<o&&s.push(e.slice(p,o)),p=++o):"("===f?r++:")"===f&&(r--,r<=0&&(p<o&&s.push(e.slice(p,o)),t.arr.last(d.elems).attrs=t.str.split(t.str.trim(t.str.join(s))),c=i))}}return p<e.length&&d.children.push(e.slice(p)),t.assert(u.length<=0),d}},211:(e,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0});const t=s(174);r.default=function(e,r,s){t.is.un(s)&&(s=e=>"~ano-"+String(e));const n=[];let l=0;const i=/([^$(){}<> \n]+ ?)?<<</,a="<<<";for(;;){let o=r.search(i);if(o<0){n.push(r);break}o>0&&(n.push(r.slice(0,o)),r=r.slice(o)),o=r.search(a);let d=r.slice(0,o),u=">>>"+t.str.reverse(d),h=t.str.trim(d);if(h.length<=0&&(h=s(l++)),o=(r=r.slice(o+a.length)).search(u),o<0){n.push(d),n.push(a);continue}let p=r.slice(0,o),c=`$:(${h}){}`;n.push(c),e.set(h,[p]),r=r.slice(o+u.length)}return t.str.join(n)}},882:(e,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.addAttrs=r.addClass=r.copyStatus=r.newCode=r.newElement=void 0;const t=s(174);r.newElement=function(){return{elems:[],children:[],level:-1,status:{}}},r.newCode=function(e,r){const s={X:"H",N:e};return t.is.un(r)||(s.C={X:"A",I:r}),s},r.copyStatus=function(e,r){e.status=t.to.obj(r.status)},r.addClass=function(e,r){return t.is.un(r)&&(r="true"),s=>{t.decor.$(s,t.decor.obj.add("A",t.init.obj),t.decor.obj.get("A"),t.decor.obj.set("X","O"),t.decor.obj.add("I",t.init.obj),t.decor.obj.get("I"),t.decor.obj.add("class",t.init.obj),t.decor.obj.get("class"),t.decor.obj.set("X","O"),t.decor.obj.add("I",t.init.obj),t.decor.obj.get("I"),t.decor.obj.set(e,r))}},r.addAttrs=function(e,r){return s=>{t.decor.$(s,t.decor.obj.add("A",t.init.obj),t.decor.obj.get("A"),t.decor.obj.set("X","O"),t.decor.obj.add("I",t.init.obj),t.decor.obj.get("I"),t.decor.obj.add("attrs",t.init.obj),t.decor.obj.get("attrs"),t.decor.obj.set("X","O"),t.decor.obj.add("I",t.init.obj),t.decor.obj.get("I"),t.decor.obj.set(e,r))}}},174:e=>{e.exports=self.$yogurtcat$lib}},r={};return function s(t){if(r[t])return r[t].exports;var n=r[t]={exports:{}};return e[t](n,n.exports,s),n.exports}(607)})();